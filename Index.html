<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xonacatlan</title>
    <link rel="stylesheet" href="mapa.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/e89f4d0241.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
</head>
<body>
    <!-- Menú lateral -->
    <nav id="sidebar">
        <div class="sidebar-header">
            <h2 style="color: white;">Menu</h2>
        </div>
        <ul>
            <li><label for="inicio-radio"><i class="fa-solid fa-house"></i> Inicio</label></li>
            <li><label for="mapa-radio"><i class="fa-solid fa-map"></i> Mapa</label></li>
            <li><label for="comentarios-radio"><i class="fa-solid fa-comments"></i> Comentarios</label></li>
            <li><label for="contacto-radio"><i class="fa-solid fa-phone"></i> Contacto</label></li>

        </ul>
    </nav>

    <input type="radio" name="section" id="inicio-radio" checked>
    <input type="radio" name="section" id="mapa-radio" checked>
    <input type="radio" name="section" id="comentarios-radio" checked>
    <input type="radio" name="section" id="contacto-radio" checked>

    <!-- Contenido principal -->
    <main id="content">
        <!-- Encabezado -->
        <header class="header-content">
            <h1>Explora Xonacatlan</h1>
            <p>Descubre la belleza y cultura de Xonacatlan.</p>
        </header>

        <!-- Sección de Inicio -->
        <section id="inicio">
            <h2>Bienvenido</h2>
            <p>
                Xonacatlán es un nombre náhuatl, que se compone de xonacatl: "cebolla"; tlan: "entre", que significa "Entre las Cebollas".
            </p>
            <p><em><strong>Monumentos Históricos</strong></em></p>
            <p>Las iglesias dedicadas a San Francisco de Asís en la cabecera municipal, la de Santa María de la Asunción en Zolotepec, La 
                de San Miguel Arcángel en Mimiapan y la de Santiago Apóstol en Tejocotillos son monumentos históricos, patrimonio del municipio.
            </p>
                
            <p>Por fortuna aún se conservan los portales del siglo XIX ubicados en la cabecera municipal, así como viejas casonas que se pueden
                apreciar en las comunidades de Mimiapan y Zolotepec.</p>
            </p>
            <p><em><strong>Artesanías</strong></em></p>
            <p>El municipio se ha caracterizado por ser un lugar donde se elaboran prendas de lana como: gabanes, cobijas, tapices, gobelinos,
                fajas, quexquemels, chales, morrales y fajillas. Se realizan también artículos de madera, productos de cuero, de pólvora y  muñecos de peluche.</p>
            <p><em><strong>Fiestas Populares</strong></em></p> 
            <p>En Santa María Zolotepec, en los meses de febrero o marzo se realiza un carnaval. Santiago Tejocotillos festeja
                a Santiago Apóstol el 25 de julio; en Zolotepec a Santa María de la Asunción el 15 de agosto; en Mimiapan a San Miguel Arcángel el
                29 de septiembre; Xonacatlán (cabecera municipal) a San Francisco de Asís el 4 de octubre; el barrio de San Antonio festeja a San Antonio Padua
                el 13 de junio y la colonia Emiliano Zapata a la Santa Cruz el 3 de mayo.</p>
            <img src="Xona.png" alt="Imagen de México" class="section-image">
            <img src="peluche.png" alt="Imagen de México" class="section-image">
        </section>

        <!-- Sección del Mapa -->
        <section id="mapa">
            <h2>Mapa Interactivo</h2>

            <div class="search-container">
                <input type="text" id="search-input" placeholder="Buscar ubicaciones..." />
                <button id="search-button">Buscar</button>
            </div>
            <div class="map-container">
                <div id="map"></div>
                </div>
            </div>
        </section>

        <!-- Sección de Comentarios -->
        <section id="comentarios">
            <h2>Comentarios</h2>
            <p>
                ¡Nos encantaría saber tu opinión! Déjanos tus comentarios sobre esta página o sobre Xonacatlan.
            </p>
            <form class="comment-form">
                <textarea placeholder="Escribe tu comentario aquí..." rows="5"></textarea>
                <button type="submit">Enviar</button>
            </form>
        </section>

        <!-- Sección de Contacto -->
        <!-- Sección de Contacto -->
        <section id="contacto">
            <div class="contact-wrapper">
                <div class="contact-form">
                    <h3>Contactanos</h3>
                    <form action="">
                        <p>
                            <label>Nombre</label>
                            <input type="text" name="fullname" required placeholder="Nombre y Apellido">
                        </p>
                        <p>
                            <label>Correo Electrónico</label>
                            <input type="email" name="email" required placeholder="Correo electrónico">
                        </p>
                        <p>
                            <label>Telefono</label>
                            <input type="tel" name="phone" placeholder="Teléfono">
                        </p>
                        <p>
                            <label>Asunto</label>
                            <input type="text" name="affair">
                        </p>
                        <p class="block">
                           <label>Mensaje</label> 
                            <textarea name="message" rows="3"></textarea>
                        </p>
                        <p class="block">
                            <button>Enviar</button>
                        </p>
                    </form>
                </div>
                <div class="contact-info">
                    <h3>Más Información</h3>
                    <ul>
                        <li><a href="https://maps.app.goo.gl/xRLz6Vs4gA2L29Xm8"><i class="fa-solid fa-location-dot"></i>Manzana 012, 52067 La Jardona, Méx.</a></li>
                        <li><i class="fa-solid fa-phone"></i> (729) 830 0340</li>
                        <li><i class="fa-solid fa-envelope"></i> maganatrs@gmail.com</li>
                    </ul>
                    <p>¡Estamos aquí para responder cualquier pregunta que tengas sobre Xonacatlán!</p>
                    <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#"><i class="fa-brands fa-twitter"></i></a>
                </div>
            </div>
        </section>

        <!-- Pie de página -->
        <footer class="footer-content">
            <p>Proyecto 404</p>
        </footer>
    </main>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
       
    <script>
        // Esperamos a que todo esté cargado
        window.addEventListener('load', function() {
            // Inicializamos el mapa cuando la sección de mapa esté visible
            document.getElementById('mapa-radio').addEventListener('change', function() {
                if(this.checked) {
                    initMap();
                }
            });
            
            // Si la sección de mapa está activa al cargar
            if(document.getElementById('mapa-radio').checked) {
                initMap();
            }
        });

        function initMap() {
            // Verificamos si el mapa ya fue inicializado
            if(document.getElementById('map')._leaflet_map) return;
            
            console.log("Inicializando mapa...");
            
            // Coordenadas de Xonacatlán
            const xonacatlanBounds = [
                [19.370, -99.580], // Esquina suroeste
                [19.450, -99.500]  // Esquina noreste
            ];

            // Creamos el mapa
            const map = L.map('map', {
                maxBounds: xonacatlanBounds,
                maxZoom: 18,
                minZoom: 12,
                bounceAtZoomLimits: false
            }).fitBounds(xonacatlanBounds);

            // Añadimos capa base
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '©️ OpenStreetMap'
            }).addTo(map);

            // Forzamos el redimensionamiento
            setTimeout(function() {
                map.invalidateSize(true);
                map.fitBounds(xonacatlanBounds);
                console.log("Mapa redimensionado");
            }, 100);
            
            // Marcador de prueba
            L.marker([19.4101, -99.5440]).addTo(map)
                .bindPopup('<b>Xonacatlán</b><br>Municipio del Estado de México.')
                .openPopup();
        }
        // Cargar ubicaciones desde PHP
fetch('fetch_locations.php')
    .then(response => response.json())
    .then(locations => {
        const markers = L.layerGroup();
        locations.forEach(location => {
            const marker = L.marker([19.4101, -99.5440]) // Puedes ajustar las coordenadas según tu mapa
                .bindPopup(`<b>${location.name}</b><br>${location.description}<br>${location.address}`);
            markers.addLayer(marker);
        });
        markers.addTo(map);

        // Funcionalidad de búsqueda
        document.getElementById('search-button').addEventListener('click', () => {
            const searchInput = document.getElementById('search-input').value.toLowerCase();
            const foundLocation = locations.find(location =>
                location.name.toLowerCase().includes(searchInput)
            );

            if (foundLocation) {
                alert(`Ubicación encontrada:\nNombre: ${foundLocation.name}\nDescripción: ${foundLocation.description}\nDirección: ${foundLocation.address}`);
            } else {
                alert('Ubicación no encontrada.');
            }
        });
    })
    .catch(error => console.error('Error al cargar ubicaciones:', error));
    </script> 
</body>
</html>
